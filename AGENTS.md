# Agent Instructions

## Testing
*   Use `go:embed` from `testdata/` for all multiline sample data in tests.
*   Use `.txtar` files in `testdata/txtar/` for parser and serializer round-trip tests.
    *   Each `.txtar` file should contain an `input.rcs` file and an `expected.json` file.
    *   These tests verify that parsing `input.rcs` results in the structure defined in `expected.json`, and that `File.String()` matches the original input (or a normalized version if specified).
*   New features should include tests covering both positive and negative cases.
*   When testing CLI flags, prefer integration tests that verify behavior through the command execution path.
*   Multiline full RCS test data must be `go:embed` not added as a multiline string. Ideally integrated into the txtar system but not always necessary depending on pragmatics.

## Coding Standards
*   Use standard Go formatting (`go fmt`).
*   Ensure all new files have appropriate package declarations.
*   Avoid adding binary artifacts to the repository.

## Documentation
*   Whenever subcommands are updated, update the documentation such as `readme.md`.

## Project-specific Hints
* Where it fits naturally, prefer receiver-based variadic typed options (`ops ...any` with small option types) for operation-style APIs.
* For `cmd/gorcs` command code, keep files generator-aligned with `github.com/arran4/go-subcommand`; after changing CLI shape, run `go generate ./internal/cli` and keep the generated banner comments in command files.
* `cmd/gorcs` is entirely generated by `go-subcommand`. Logic should reside in `internal/cli`, and the `cmd/gorcs/*.go` files should delegate to functions in `internal/cli`.
